<div class="d-flex justify-content-end m-3">
    <button type="button" class="btn btn-primary ml-2" *ngIf="!editingAssociatedAgreements" (click)="editAssociatedAgreements()">Edit</button>
    <button type="button" class="btn btn-success ml-2" *ngIf="editingAssociatedAgreements" (click)="saveAssociatedAgreements()">Save</button>
    <button type="button" class="btn btn-info ml-2" *ngIf="editingAssociatedAgreements" (click)="addNewAssociatedAgreement()">Add</button>
    <button type="button" class="btn btn-danger ml-2" *ngIf="editingAssociatedAgreements" (click)="cancelEditAssociatedAgreements()">Cancel</button>
</div>
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>
                    <span jhiTranslate="billingWebApp.discount.tabs.associatedAgreements.agreementType">Agreement Type</span>
                </th>
                <th>
                    <span jhiTranslate="billingWebApp.discount.tabs.associatedAgreements.version">Version</span>
                </th>
                <th *ngIf="editingAssociatedAgreements"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="creatingAssociatedAgreements" [formGroup]="formCreateNewAssociatedAgreement">
                <td>
                    <select class="form-control" id="newAssociatedAgreementType" name="newAssociatedAgreementType" formControlName="agreementType">
                        <option [ngValue]="associatedAgreementType" *ngFor="let associatedAgreementType of associatedAgreementTypeOptions">{{associatedAgreementType}}</option>
                    </select>
                </td>
                <td>
                    <input type="text" class="form-control" name="newAssociatedAgreementVersion" id="newAssociatedAgreementVersion"
                        formControlName="version">
                </td>
                <td class="d-flex">
                    <button type="button" class="btn btn-sm btn-danger btn-circle" title="Remove"
                        (click)="discardNewAssociatedAgreement()">
                        <span class="fa fa-lg fa-trash"></span>
                    </button>
                    <button type="button" class="btn btn-sm btn-success btn-circle ml-2" title="Confirm"
                        [disabled]="formCreateNewAssociatedAgreement.invalid" (click)="confirmNewAssociatedAgreement()">
                        <span class="fa fa-lg fa-check"></span>
                    </button>
                </td>
            </tr>
            <tr *ngFor="let associatedAgreement of associatedAgreements; let i = index">
                <ng-container *ngIf="!editingAssociatedAgreements; else editExistingAssociatedAgreements">
                    <td> {{associatedAgreement?.agreementType}} </td>
                    <td> {{associatedAgreement?.version}} </td>
                </ng-container>
                <ng-template #editExistingAssociatedAgreements>
                    <td>
                        <select class="form-control" id="associatedAgreementType" name="associatedAgreementType" [ngModel]="associatedAgreement.agreementType"
                         (ngModelChange)="associatedAgreement.agreementType = $event" (ngModelChange)="onEditExistingAssociatedAgreement(associatedAgreement)">
                            <option [ngValue]="associatedAgreementType" *ngFor="let associatedAgreementType of associatedAgreementTypeOptions">{{associatedAgreementType}}</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" class="form-control" name="associatedAgreementVersion" [ngModel]="associatedAgreement.version" 
                            (ngModelChange)="associatedAgreement.version = $event" (ngModelChange)="onEditExistingAssociatedAgreement(associatedAgreement)">
                    </td>
                    <td>
                        <button type="button" class="btn btn-sm btn-danger btn-circle" title="Remove"
                            (click)="removeAssociatedAgreement(i, associatedAgreement)">
                            <span class="fa fa-lg fa-trash"></span>
                        </button>
                    </td>
                </ng-template>
            </tr>
        </tbody>
    </table>
</div>