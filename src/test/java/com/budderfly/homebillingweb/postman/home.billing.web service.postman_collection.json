{
    "info": {
        "_postman_id": "c99ca748-bff2-4893-8145-490576ff3060",
        "name": "home.billing.web service",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "QA Authenticate user",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "id": "d19becfc-08b0-4e2d-abcf-6792d2851426",
                        "exec": [
                            "pm.test(\"Response has expected data\", function(){",
                            "    var json = pm.response.json();",
                            "    pm.expect(json).to.have.deep.property(\"access_token\");",
                            "    pm.expect(json).to.have.deep.property(\"refresh_token\");",
                            "    ",
                            "    pm.globals.set(\"access_token\", json.access_token);",
                            "    pm.globals.set(\"refresh_token\", json.refresh_token);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "name": "Content-Type",
                        "value": "application/json",
                        "type": "text"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"username\": \"customer\", \"password\": \"demopw@45\"}",
                    "options": {
                        "raw": {
                            "language": "json"
                        }
                    }
                },
                "url": {
                    "raw": "https://qa2mshome.budderfly.com/auth/login",
                    "protocol": "https",
                    "host": ["qa2mshome", "budderfly", "com"],
                    "path": ["auth", "login"]
                },
                "description": "Login "
            },
            "response": []
        },
        {
            "name": "QA Site API call",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "id": "3f7cbe5f-f2ad-4b41-9135-5ce0070a7f89",
                        "exec": [
                            "pm.test(\"Returned APIInfo successfully\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.response.to.have.status(200)",
                            "    pm.expect(jsonData[0]).to.not.be.empty",
                            "});",
                            "",
                            "pm.test(\"Response has body\", function () {",
                            "    pm.response.to.be.withBody; ",
                            "});",
                            "",
                            "pm.test(\"User owned siteId matched\", function(){",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData[0].budderflyId).to.eql('OLYM-10');",
                            "    pm.expect(jsonData[1].budderflyId).to.eql('OLYM-2');",
                            "    pm.expect(jsonData[2].budderflyId).to.eql('OLYM-4');",
                            "    pm.expect(jsonData[3].budderflyId).to.eql('SUBW-24978');",
                            "    pm.expect(jsonData[4].budderflyId).to.eql('SUBW-2777');",
                            "});",
                            "",
                            "pm.test(\"Balance and Address not Null\", function(){",
                            "    var jsonData = JSON.parse(responseBody)",
                            "    jsonData.balance !== null && ",
                            "    jsonData.address !== null",
                            "});",
                            "",
                            "// change int value for different user",
                            "pm.test(\"Reponse has 5 records\" , function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.length).to.equal(5);",
                            "});",
                            ""
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "https://qa2mshome.budderfly.com/invoice/api/budderfly-invoices/by-budderfly-id/by-previous-date-and-balance",
                    "protocol": "https",
                    "host": ["qa2mshome", "budderfly", "com"],
                    "path": ["invoice", "api", "budderfly-invoices", "by-budderfly-id", "by-previous-date-and-balance"]
                },
                "description": "/invoice/api/budderfly-invoices/by-budderfly-id/by-previous-date-and-balance"
            },
            "response": []
        },
        {
            "name": "QA Invoice API call",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "id": "3f7cbe5f-f2ad-4b41-9135-5ce0070a7f89",
                        "exec": [
                            "pm.test(\"Returned APIInfo successfully\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.response.to.have.status(200)",
                            "    pm.expect(jsonData[0]).to.not.be.empty",
                            "});",
                            "",
                            "pm.test(\"Response has body\", function () {",
                            "    pm.response.to.be.withBody; ",
                            "});",
                            "",
                            "pm.test(\"pdfUrl not null\", function(){",
                            "    var jsonData = JSON.parse(responseBody)",
                            "    jsonData.pdfUrl !== null && ",
                            "    jsonData.pdfUrl !== ' '",
                            "});",
                            "",
                            "// change int value for different user",
                            "pm.test(\"Reponse has 3 records\" , function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.length).to.equal(3);",
                            "});",
                            ""
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "https://qa2mshome.budderfly.com/invoice/api/budderfly-invoices/by-status-and-dates/OLYM-10",
                    "protocol": "https",
                    "host": ["qa2mshome", "budderfly", "com"],
                    "path": ["invoice", "api", "budderfly-invoices", "by-status-and-dates", "OLYM-10"]
                },
                "description": "Site Id = OLYM-10"
            },
            "response": []
        }
    ],
    "protocolProfileBehavior": {}
}
